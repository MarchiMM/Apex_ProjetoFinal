CREATE DATABASE DB_PROJETO_FINAL

USE DB_PROJETO_FINAL

CREATE TABLE Company(
	ID INT PRIMARY KEY,
	NAME VARCHAR(100) NOT NULL
)

CREATE TABLE Equipament(
	ID INT PRIMARY KEY,
	TYPE VARCHAR(100) NOT NULL,
	BRAND VARCHAR(40) NOT NULL,
	MODEL VARCHAR(100) NOT NULL,
	SERIALNUMBER VARCHAR(100) NOT NULL
)

CREATE TABLE Person(
	ID INT PRIMARY KEY,
	TYPE CHAR(1) NOT NULL,
	PERSONTYPE CHAR(1) NOT NULL,
	NAME VARCHAR(100) NOT NULL,
	CPF VARCHAR(11),
	CNPJ VARCHAR(12),
	COMPANYID INT,
	ADDRESS VARCHAR(100),
	PHONENUMBER VARCHAR(16),
	EMAIL VARCHAR(60)
)
ALTER TABLE Person
ADD CONSTRAINT FK_Person_Company
FOREIGN KEY(COMPANYID)
REFERENCES Company(ID)

CREATE TABLE Taxation(
	ID INT PRIMARY KEY,
	TAXDESCRIPTION VARCHAR(100) NOT NULL,
	PERCENTAGE FLOAT(25) NOT NULL,
	EFFECTIVEDATE DATETIME,
	EXPIRATIONDATE DATETIME
)

CREATE TABLE Request(
	ID INT PRIMARY KEY,
	STATUS CHAR(1) NOT NULL,
	PERSONID INT NOT NULL,
	EQUIPAMENTID INT NOT NULL,
	DEMAND VARCHAR(800) NOT NULL,
	SERVICEDESCRIPTION VARCHAR(800),
	TAXATIONID INT
)
ALTER TABLE Request
ADD CONSTRAINT FK_Request_Person
FOREIGN KEY(PERSONID)
REFERENCES Person(ID)

ALTER TABLE Request
ADD CONSTRAINT FK_Request_Equipament
FOREIGN KEY(EQUIPAMENTID)
REFERENCES Equipament(ID)

ALTER TABLE Request
ADD CONSTRAINT FK_Request_Taxation
FOREIGN KEY(TAXATIONID)
REFERENCES Taxation(ID)